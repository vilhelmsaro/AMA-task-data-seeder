# ============================================================================
# AMA Task Data Seeder - Environment Variables Configuration
# ============================================================================
# 
# This file contains all configurable environment variables with their defaults.
# Copy this file to .env and customize as needed:
#   cp .env.example .env
#
# All variables have sensible defaults and work out of the box.
# You only need to customize if you have specific requirements.
# ============================================================================

# ----------------------------------------------------------------------------
# Infrastructure Configuration (Redis & Sentinel)
# ----------------------------------------------------------------------------

# Redis Master Configuration
REDIS_MASTER_PORT=6379

# Redis Replica Configuration
REDIS_REPLICA_PORT=6380

# Redis Health Check Configuration
REDIS_HEALTHCHECK_INTERVAL=5s
REDIS_HEALTHCHECK_TIMEOUT=3s
REDIS_HEALTHCHECK_RETRIES=5

# Sentinel Configuration
SENTINEL_PORT=26379
SENTINEL_1_PORT=26379
SENTINEL_2_PORT=26380
SENTINEL_3_PORT=26381
REDIS_SENTINEL_MASTER_NAME=mymaster
SENTINEL_QUORUM=2
SENTINEL_DOWN_AFTER_MS=1000
SENTINEL_FAILOVER_TIMEOUT_MS=3000
SENTINEL_PARALLEL_SYNCS=1

# Docker Network Configuration
SEEDER_NETWORK_NAME=seeder-network

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------

# Application Port
PORT=3000

# Redis Connection Configuration
# Set to 'true' to use Sentinel (recommended for production with failover)
# Set to 'false' to connect directly to Redis master (for development/testing)
REDIS_USE_SENTINEL=true

# Sentinel Hosts (comma-separated list)
# Format: host1:port1,host2:port2,host3:port3
REDIS_SENTINEL_HOSTS=redis-sentinel-1:26379,redis-sentinel-2:26379,redis-sentinel-3:26379

# Direct Redis Connection (used when REDIS_USE_SENTINEL=false)
REDIS_HOST=redis-master
# Note: REDIS_PORT uses REDIS_MASTER_PORT value

# SQLite Database Configuration
SQLITE_DB_PATH=/app/data/cars.db

# ----------------------------------------------------------------------------
# Circuit Breaker Configuration
# ----------------------------------------------------------------------------

# Number of failures before opening the circuit breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Cooldown period (milliseconds) before attempting to reconnect
CIRCUIT_BREAKER_COOLDOWN_MS=2000

# ----------------------------------------------------------------------------
# Recovery Configuration
# ----------------------------------------------------------------------------

# Number of SQLite entries to process per recovery batch
RECOVERY_CHUNK_SIZE=50

# Cooldown period (milliseconds) between recovery batches
RECOVERY_COOLDOWN_MS=10000

# Interval (milliseconds) to check for new entries to recover
RECOVERY_CHECK_INTERVAL_MS=5000

# ----------------------------------------------------------------------------
# Car Generation Configuration
# ----------------------------------------------------------------------------

# Interval (milliseconds) between car entity generations
# Lower values = more cars per minute
# Default: 30ms â‰ˆ ~2000 cars per minute
CAR_GENERATION_INTERVAL_MS=30

# ----------------------------------------------------------------------------
# Paths & Volumes Configuration
# ----------------------------------------------------------------------------

# Host path for SQLite data (relative to project root or absolute path)
DATA_VOLUME_PATH=./data

# Host path for logs (relative to project root or absolute path)
LOGS_VOLUME_PATH=./logs

# Container path for SQLite data (must be absolute path)
SQLITE_DATA_DIR=/app/data

# Container path for logs (must be absolute path)
LOGS_DIR=/app/logs

# Metrics log directory (inside container)
METRICS_LOG_DIR=/app/logs
